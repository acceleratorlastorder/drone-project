function start(){gamepadlistener()}function settheinterval(){window.clearInterval(gamepadTimeout),inputvalue=document.getElementById("input").value,interval=inputvalue,info.innerHTML="interval is = "+inputvalue+" ms"}function createJSON(a,b,c,d){return status=JSON.stringify([parseFloat(a.toFixed(6),10),parseFloat(b.toFixed(6),10),parseFloat(c.toFixed(6),10),parseFloat(d.toFixed(6),10)])}function gamepadlistener(){window.addEventListener("gamepaddisconnected",function(a){console.log("Contrôleur n°%d déconnecté : %s",a.gamepad.index,a.gamepad.id),window.clearInterval(gamepadTimeout)}),window.addEventListener("gamepadconnected",function(a){function f(){throttle=(b.axes[3]+1+(b.axes[4]+1))/4,roll=(b.axes[2]+1)/2,roll<=0&&(roll=1e-6),pitch=(b.axes[1]+1)/2,yaw=(b.axes[0]+1)/2,sendData(createJSON(roll,pitch,yaw,throttle)),c=b.buttons,d=b.axes,e=c.length;for(var a=0;a<c.length;a++)statusli[a].innerHTML=c[a].pressed;for(var a=0;a<8;a++)statusli[a+18].innerHTML=d[a]}var b=navigator.getGamepads()[0];console.log("Gamepad connected at index %d: %s. %d buttons, %d axes.",b.index,b.id,b.buttons.length,b.axes.length);let c,d,e;gamepadTimeout=window.setInterval(f,interval)})}function makeJSONFixedLength(){}function isStatusHaschanged(){return void 0!=buffer[1]&&(buffer[0]!=buffer[1]||(console.log("nochange"),!1))}function shorterFloat(){let a=1e6,b=1e-6;roll+=b,pitch+=b,yaw+=b,throttle+=b,roll=Math.round(roll*a)/a,pitch=Math.round(pitch*a)/a,yaw=Math.round(yaw*a)/a,throttle=Math.round(throttle*a)/a}function sendData(a){console.log("dataToSend: ",a,"length of dataToSend: ",a.length),ws.send(a),console.log("sent")}function sendtesultime(){var a=JSON.stringify(testultime);console.log("status ",a,"length ",a.length);for(var b=0;b<a.length;b++)a[b];sendData(a)}function getInputValue(){return input.value}document.addEventListener("DOMContentLoaded",function(a){console.log("DOM loaded launching functions"),start()});var gamepadTimeout;let inputbutton=document.getElementById("button");inputbutton.addEventListener("click",settheinterval,!1);let inputvalue,status,info=document.getElementById("info"),interval=500,statusli=document.querySelectorAll(".status"),limessage=document.getElementById("limessage"),buffer=[];var roll,pitch,yaw,throttle,testultime=[.513746,.498054,.501976,0],host=window.document.location.host.replace(/:.*/,"");console.log("host: ",host,"full address is then ","ws://"+host+":8080");var ws=new WebSocket("ws://"+host+":8080");ws.onmessage=function(a){console.log("message received event: ",a.data),limessage.innerHTML=a.data};let identity={};
